<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>PointRise</title>
  <style>
    :root{
      --bg:#c9f7c9;       /* Ø§Ù„Ø£Ø®Ø¶Ø± Ø§Ù„ÙØ§ØªØ­ */
      --card:#f5fff5;
      --text:#0f2a12;     /* Ù†Øµ ØºØ§Ù…Ù‚ ÙˆØ§Ø¶Ø­ */
      --muted:#2c5a35;
      --brand:#0a7a2f;
      --brand2:#1f6fff;
      --danger:#d84a4a;
      --shadow: 0 12px 30px rgba(0,0,0,.15);
      --radius:20px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans Arabic", sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height:100vh;
    }
    a{color:inherit}
    .wrap{max-width:980px;margin:0 auto;padding:18px}
    .topbar{
      display:flex;align-items:center;justify-content:space-between;
      gap:12px;margin-bottom:14px
    }
    .brand{
      display:flex;align-items:center;gap:10px;
      font-weight:800;font-size:24px;
    }
    .logo{
      width:42px;height:42px;border-radius:14px;
      background: linear-gradient(135deg,#0a7a2f,#6cff9b);
      box-shadow: var(--shadow);
      position:relative;
    }
    .logo:after{
      content:"";
      position:absolute;inset:10px 12px 12px 10px;
      border-radius:12px;
      background:rgba(255,255,255,.85);
      transform:rotate(10deg);
    }
    .lang{
      display:flex;align-items:center;gap:8px;
    }
    .pill{
      border:1px solid rgba(0,0,0,.12);
      background: rgba(255,255,255,.6);
      padding:10px 12px;border-radius:999px;
      display:flex;align-items:center;gap:8px;
      box-shadow: 0 4px 12px rgba(0,0,0,.08);
    }
    select{
      border:none;background:transparent;
      font-size:14px;outline:none;color:var(--text);
    }

    .card{
      background: var(--card);
      border:1px solid rgba(0,0,0,.08);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }

    /* Slider */
    .slider{
      position:relative;
      height:210px;
      background:#eaffea;
      overflow:hidden;
    }
    .slides{
      display:flex;
      height:100%;
      width:300%;
      transform: translateX(0);
      transition: transform .6s ease;
    }
    .slide{
      width:100%;
      height:100%;
      position:relative;
      display:flex;align-items:flex-end;
      padding:16px;
      color:#ffffff;
      font-weight:800;
      letter-spacing:.2px;
    }
    .slide .caption{
      background: rgba(0,0,0,.35);
      padding:10px 12px;border-radius:14px;
      backdrop-filter: blur(6px);
      border:1px solid rgba(255,255,255,.25);
    }
    .s1{background:linear-gradient(135deg,#0b7a2f,#8dffb2)}
    .s2{background:linear-gradient(135deg,#1f6fff,#87c7ff)}
    .s3{background:linear-gradient(135deg,#2c2c2c,#6d6d6d)}
    .dots{
      position:absolute;left:12px;bottom:12px;
      display:flex;gap:8px;
      direction:ltr;
    }
    .dot{
      width:10px;height:10px;border-radius:50%;
      background: rgba(255,255,255,.5);
      border:1px solid rgba(0,0,0,.15);
      cursor:pointer;
    }
    .dot.active{background:#fff}

    /* Main grid */
    .content{padding:16px}
    .grid{
      display:grid;
      grid-template-columns: 1fr;
      gap:14px;
    }
    @media (min-width: 860px){
      .grid{grid-template-columns: 1.1fr .9fr;}
    }

    .section{
      background:rgba(255,255,255,.65);
      border:1px solid rgba(0,0,0,.08);
      border-radius: 18px;
      padding:14px;
    }
    h2{margin:0 0 10px;font-size:18px}
    p{margin:8px 0;color:var(--muted);line-height:1.5}

    .row{display:flex;gap:10px;flex-wrap:wrap}
    .btn{
      border:none;cursor:pointer;
      padding:12px 14px;border-radius:14px;
      font-weight:800;
      box-shadow: 0 10px 22px rgba(0,0,0,.14);
      transition: transform .06s ease;
    }
    .btn:active{transform: translateY(1px)}
    .btn.primary{background:var(--brand);color:#fff}
    .btn.blue{background:var(--brand2);color:#fff}
    .btn.ghost{background:#ffffff;color:var(--text);border:1px solid rgba(0,0,0,.12);box-shadow:none}

    .field{
      display:flex;flex-direction:column;gap:6px;margin:10px 0;
    }
    label{font-size:13px;color:var(--muted);font-weight:700}
    input{
      padding:12px 12px;border-radius:14px;
      border:1px solid rgba(0,0,0,.14);
      outline:none;background:#fff;
      font-size:14px;color:var(--text);
    }

    .kpi{
      display:grid;grid-template-columns: repeat(3, 1fr);gap:10px;
    }
    .kpi .box{
      background:#ffffff;border:1px solid rgba(0,0,0,.08);
      border-radius:16px;padding:10px;
      text-align:center;
    }
    .kpi .n{font-weight:900;font-size:18px}
    .kpi .t{font-size:12px;color:var(--muted);font-weight:700}

    table{width:100%;border-collapse:collapse}
    th,td{padding:10px;border-bottom:1px solid rgba(0,0,0,.08);font-size:13px}
    th{text-align:right;color:var(--muted)}
    .badge{
      display:inline-block;padding:4px 8px;border-radius:999px;
      font-size:12px;font-weight:800;
      background:rgba(10,122,47,.12);
      color:#0a7a2f;
      border:1px solid rgba(10,122,47,.25);
    }
    .warn{
      background: rgba(216,74,74,.10);
      border: 1px solid rgba(216,74,74,.22);
      color:#7c1f1f;
      padding:10px;border-radius:14px;
      font-weight:700;
    }

    /* Tabs (simple) */
    .tabs{display:flex;gap:8px;flex-wrap:wrap;margin:10px 0 0}
    .tab{padding:10px 12px;border-radius:999px;border:1px solid rgba(0,0,0,.12);background:#fff;cursor:pointer;font-weight:800}
    .tab.active{background:rgba(10,122,47,.12);border-color:rgba(10,122,47,.25);color:#0a7a2f}
    .hidden{display:none}

    /* Footer */
    .footer{
      opacity:.8;
      text-align:center;
      padding:18px 0 6px;
      font-size:12px;color:var(--muted);
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="topbar">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>PointRise</div>
      </div>

      <div class="lang pill">
        <span aria-hidden="true">ğŸŒ</span>
        <select id="langSelect">
          <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
          <option value="fr">FranÃ§ais</option>
        </select>
      </div>
    </div>

    <div class="card">
      <div class="slider" id="slider">
        <div class="slides" id="slides">
          <div class="slide s1"><div class="caption" data-i18n="slide1">Ù…Ù‡Ù…Ù‘Ø© ÙŠÙˆÙ…ÙŠØ© Ø¨Ø³ÙŠØ·Ø© â€¢ Ù†Ù‚Ø§Ø· Ø´ÙØ§ÙØ©</div></div>
          <div class="slide s2"><div class="caption" data-i18n="slide2">ÙˆØ§Ø¬Ù‡Ø© Ù†Ø¸ÙŠÙØ© â€¢ Ø³Ø¬Ù„ Ø¹Ù…Ù„ÙŠØ§Øª ÙˆØ§Ø¶Ø­</div></div>
          <div class="slide s3"><div class="caption" data-i18n="slide3">Ø¥ÙŠØ¯Ø§Ø¹ ÙŠØ¯ÙˆÙŠ â€¢ Ø¥Ø¯Ø§Ø±Ø© Ù…Ù† Ù„ÙˆØ­Ø© Admin</div></div>
        </div>
        <div class="dots" id="dots">
          <div class="dot active" data-i="0"></div>
          <div class="dot" data-i="1"></div>
          <div class="dot" data-i="2"></div>
        </div>
      </div>

      <div class="content">
        <div class="tabs">
          <button class="tab active" data-view="home" data-i18n="tabHome">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
          <button class="tab" data-view="auth" data-i18n="tabAuth">ØªØ³Ø¬ÙŠÙ„ / Ø¯Ø®ÙˆÙ„</button>
          <button class="tab" data-view="wallet" data-i18n="tabWallet">Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹</button>
          <button class="tab" data-view="tasks" data-i18n="tabTasks">Ø§Ù„Ù…Ù‡Ø§Ù…</button>
          <button class="tab" data-view="log" data-i18n="tabLog">Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</button>
        </div>

        <!-- HOME -->
        <div id="view-home" class="grid" style="margin-top:12px;">
          <div class="section">
            <h2 data-i18n="welcomeTitle">Ù…Ø±Ø­Ø¨Ø§ Ø¨Ùƒ ÙÙŠ PointRise</h2>
            <p data-i18n="welcomeText">
    
            </p>
            <div class="warn" data-i18n="warnText">
        
            </div>

            <div style="height:10px"></div>
            <div class="kpi">
              <div class="box"><div class="n" id="kpiBalance">0.00</div><div class="t" data-i18n="kpiBalance">Ø§Ù„Ø±ØµÙŠØ¯</div></div>
              <div class="box"><div class="n" id="kpiLevel">VIP 1</div><div class="t" data-i18n="kpiLevel">Ø§Ù„Ù…Ø³ØªÙˆÙ‰</div></div>
              <div class="box"><div class="n" id="kpiToday">0/1</div><div class="t" data-i18n="kpiToday">Ù…Ù‡Ù…Ø© Ø§Ù„ÙŠÙˆÙ…</div></div>
            </div>

            <div style="height:12px"></div>
            <div class="row">
              <button class="btn primary" data-nav="auth" data-i18n="goAuth">ØªØ³Ø¬ÙŠÙ„ / Ø¯Ø®ÙˆÙ„</button>
              <button class="btn blue" data-nav="wallet" data-i18n="goDeposit">Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹</button>
              <button class="btn ghost" data-nav="tasks" data-i18n="goTask">Ø§Ù„Ù…Ù‡Ù…Ø© Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</button>
            </div>
          </div>

          <div class="section">
            <h2 data-i18n="levelsTitle">Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª (Ù…Ø«Ø§Ù„)</h2>
            <p data-i18n="levelsText">Ù…Ù‡Ù…Ø© ÙˆØ§Ø­Ø¯Ø© ÙƒÙ„ 24 Ø³Ø§Ø¹Ø©. Ù…Ø¯Ø© Ø§Ù„Ù…Ù‡Ù…Ø© = 30 Ø«Ø§Ù†ÙŠØ©. Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø£Ø¯Ù†Ø§Ù‡ Ø£Ù…Ø«Ù„Ø© Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØ¹Ø¯ÙŠÙ„.</p>
            <table>
              <thead>
                <tr>
                  <th data-i18n="colLevel">Ø§Ù„Ù…Ø³ØªÙˆÙ‰</th>
                  <th data-i18n="colMin">Ø­Ø¯ Ø£Ø¯Ù†Ù‰</th>
                  <th data-i18n="colReward">Ù…ÙƒØ§ÙØ£Ø© Ø§Ù„Ù…Ù‡Ù…Ø©</th>
                  <th data-i18n="colTime">Ù…Ø¯Ø©</th>
                </tr>
              </thead>
              <tbody>
                <tr><td>VIP 1</td><td>10</td><td>0.20</td><td>30s</td></tr>
                <tr><td>VIP 2</td><td>30</td><td>0.50</td><td>30s</td></tr>
                <tr><td>VIP 3</td><td>60</td><td>1.00</td><td>30s</td></tr>
                <tr><td>VIP 4</td><td>100</td><td>2.00</td><td>30s</td></tr>
              </tbody>
            </table>
            <p style="font-size:12px" data-i18n="levelsNote">* Ù‡Ø°Ø§ â€œØ¹Ø±Ø¶ ÙˆØ§Ø¬Ù‡Ø©â€ ÙÙ‚Ø·. Ø±Ø¨Ø· Ø¯ÙØ¹/Ø³Ø­Ø¨ Ø­Ù‚ÙŠÙ‚ÙŠ ÙŠØ­ØªØ§Ø¬ Ù†Ø¸Ø§Ù… Ù‚Ø§Ù†ÙˆÙ†ÙŠ ÙˆÙ…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù…ØªØ«Ø§Ù„.</p>
          </div>
        </div>

        <!-- AUTH -->
        <div id="view-auth" class="hidden" style="margin-top:12px;">
          <div class="section">
            <h2 data-i18n="authTitle">ØªØ³Ø¬ÙŠÙ„ / Ø¯Ø®ÙˆÙ„ (Demo)</h2>
            <p data-i18n="authText">Ù‡Ø°Ø§ Ù†Ù…ÙˆØ°Ø¬ ÙˆØ§Ø¬Ù‡Ø© ÙÙ‚Ø·. Ø³ÙŠØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø­Ù„ÙŠÙ‹Ø§ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…ØªØµÙØ­ (LocalStorage) Ù„Ù„ØªØ¬Ø±Ø¨Ø©.</p>

            <div class="grid">
              <div class="section">
                <h2 data-i18n="signup">ØªØ³Ø¬ÙŠÙ„</h2>
                <div class="field">
                  <label data-i18n="email">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                  <input id="suEmail" type="email" placeholder="name@example.com">
                </div>
                <div class="field">
                  <label data-i18n="password">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                  <input id="suPass" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
                </div>
                <button class="btn primary" id="btnSignup" data-i18n="btnSignup">ØªØ³Ø¬ÙŠÙ„</button>
              </div>

              <div class="section">
                <h2 data-i18n="login">Ø¯Ø®ÙˆÙ„</h2>
                <div class="field">
                  <label data-i18n="email">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                  <input id="liEmail" type="email" placeholder="name@example.com">
                </div>
                <div class="field">
                  <label data-i18n="password">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                  <input id="liPass" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
                </div>
                <button class="btn blue" id="btnLogin" data-i18n="btnLogin">Ø¯Ø®ÙˆÙ„</button>
                <button class="btn ghost" id="btnLogout" data-i18n="btnLogout" style="margin-right:8px">Ø®Ø±ÙˆØ¬</button>
              </div>
            </div>

            <p id="authMsg" style="font-weight:800;margin-top:10px"></p>
          </div>
        </div>

        <!-- WALLET / DEPOSIT -->
        <div id="view-wallet" class="hidden" style="margin-top:12px;">
          <div class="section">
            <h2 data-i18n="depositTitle">Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹ Ø§Ù„ÙŠØ¯ÙˆÙŠ (BEP20)</h2>
            <p data-i18n="depositText">Ø§Ù†Ø³Ø® Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø£Ø¯Ù†Ø§Ù‡ Ø«Ù… Ø£Ø±Ø³Ù„ TXID (Ø±Ù‚Ù… Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©) Ù„Ù„Ø¥Ø¯Ø§Ø±Ø© Ù„ÙŠØªÙ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹ ÙŠØ¯ÙˆÙŠÙ‹Ø§.</p>

            <div class="section">
              <h2 data-i18n="depositAddrTitle">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹</h2>
              <div class="pill" style="justify-content:space-between">
                <span style="font-weight:900;direction:ltr" id="depositAddr">0xec92a420efe51e1482bff48b604827734d313fab</span>
                <button class="btn ghost" id="copyAddr" style="padding:10px 12px" data-i18n="copy">Ù†Ø³Ø®</button>
              </div>

              <div class="row" style="margin-top:12px">
                <div class="pill"><strong data-i18n="minDeposit">Ø£Ù‚Ù„ Ø¥ÙŠØ¯Ø§Ø¹:</strong>&nbsp;<span>10 USDT</span></div>
                <div class="pill"><strong data-i18n="minWithdraw">Ø£Ù‚Ù„ Ø³Ø­Ø¨:</strong>&nbsp;<span>10 USDT</span></div>
              </div>
            </div>

            <div class="section">
              <h2 data-i18n="submitTxTitle">Ø¥Ø±Ø³Ø§Ù„ TXID (Demo)</h2>
              <div class="field">
                <label data-i18n="amount">Ø§Ù„Ù…Ø¨Ù„Øº</label>
                <input id="txAmount" type="number" step="0.01" min="0" placeholder="10">
              </div>
              <div class="field">
                <label data-i18n="txid">TXID (Ø±Ù‚Ù… Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©)</label>
                <input id="txid" type="text" placeholder="0x...">
              </div>
              <button class="btn primary" id="btnSubmitTx" data-i18n="submit">Ø¥Ø±Ø³Ø§Ù„</button>
              <p id="txMsg" style="font-weight:800"></p>
            </div>
          </div>
        </div>

        <!-- TASKS -->
        <div id="view-tasks" class="hidden" style="margin-top:12px;">
          <div class="section">
            <h2 data-i18n="taskTitle">Ø§Ù„Ù…Ù‡Ù…Ø© Ø§Ù„ÙŠÙˆÙ…)</h2>
            <p data-i18n="taskText">Ù…Ù‡Ù…Ø© ÙˆØ§Ø­Ø¯Ø© ÙƒÙ„ 24 Ø³Ø§Ø¹Ø©. Ø§Ø¶ØºØ· â€œØ§Ø¨Ø¯Ø£â€ Ø«Ù… Ø§Ù†ØªØ¸Ø± 30 Ø«Ø§Ù†ÙŠØ© Ù„Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ù‡Ù…Ø©.</p>

            <div class="section">
              <div class="row" style="justify-content:space-between;align-items:center">
                <div>
                  <div style="font-weight:900" data-i18n="taskName">Ù…Ø´Ø§Ù‡Ø¯Ø© Ù…Ø­ØªÙˆÙ‰ Ù„Ù…Ø¯Ø© 30 Ø«Ø§Ù†ÙŠØ©</div>
                  <div style="color:var(--muted);font-weight:700" data-i18n="taskRule">ÙŠÙ…ÙƒÙ† Ø¥ØªÙ…Ø§Ù…Ù‡Ø§ Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙŠÙˆÙ…ÙŠÙ‹Ø§</div>
                </div>
                <span class="badge" id="taskRewardLabel">+0.50</span>
              </div>

              <div style="height:10px"></div>
              <div class="row">
                <button class="btn blue" id="btnStartTask" data-i18n="start">Ø§Ø¨Ø¯Ø£</button>
                <button class="btn ghost" id="btnResetDay" title="Demo only">Reset (Demo)</button>
              </div>

              <p id="taskMsg" style="font-weight:900"></p>
            </div>
          </div>
        </div>

        <!-- LOG -->
        <div id="view-log" class="hidden" style="margin-top:12px;">
          <div class="section">
            <h2 data-i18n="logTitle">Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª (Demo)</h2>
            <p data-i18n="logText">Ù‡Ù†Ø§ ØªØ¸Ù‡Ø± Ø¹Ù…Ù„ÙŠØ§Øª: ØªØ³Ø¬ÙŠÙ„ØŒ Ø¥Ø±Ø³Ø§Ù„ TXIDØŒ Ù…ÙƒØ§ÙØ£Ø© Ù…Ù‡Ù…Ø©â€¦ (Ù…Ø­Ù„ÙŠÙ‹Ø§ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…ØªØµÙØ­).</p>
            <div class="section" style="overflow:auto">
              <table>
                <thead>
                  <tr>
                    <th data-i18n="lType">Ø§Ù„Ù†ÙˆØ¹</th>
                    <th data-i18n="lDetails">ØªÙØ§ØµÙŠÙ„</th>
                    <th data-i18n="lTime">Ø§Ù„ÙˆÙ‚Øª</th>
                  </tr>
                </thead>
                <tbody id="logBody"></tbody>
              </table>
            </div>
            <button class="btn ghost" id="btnClearLog" data-i18n="clearLog">Ù…Ø³Ø­ Ø§Ù„Ø³Ø¬Ù„</button>
          </div>
        </div>

        <div class="footer">
          Â© <span id="year"></span> PointRise â€¢ Demo UI
        </div>
      </div>
    </div>
  </div>

<script>
  // ===== Helpers =====
  const $ = (id)=>document.getElementById(id);
  const LS = {
    get(k, d){ try{ return JSON.parse(localStorage.getItem(k)) ?? d }catch{ return d } },
    set(k, v){ localStorage.setItem(k, JSON.stringify(v)) }
  };
  const now = ()=> new Date().toLocaleString();

  // ===== Demo State =====
  const state = LS.get("pr_state", {
    user: null,
    balance: 0,
    level: "VIP 2",
    taskReward: 0.50,
    lastTaskDay: null,
    logs: []
  });

  function save(){ LS.set("pr_state", state); renderAll(); }
  function log(type, details){
    state.logs.unshift({type, details, time: now()});
    save();
  }

  // ===== Slider =====
  let si = 0;
  const slides = $("slides");
  const dots = Array.from(document.querySelectorAll(".dot"));
  function setSlide(i){
    si = i;
    slides.style.transform = `translateX(${(document.documentElement.dir==="rtl" ? 1 : -1) * (i*100)}%)`;
    dots.forEach(d=>d.classList.remove("active"));
    dots[i].classList.add("active");
  }
  dots.forEach(d=>d.onclick=()=>setSlide(+d.dataset.i));
  setInterval(()=>setSlide((si+1)%3), 4500);

  // ===== Tabs / Views =====
  const tabs = Array.from(document.querySelectorAll(".tab"));
  const views = ["home","auth","wallet","tasks","log"];
  function showView(name){
    tabs.forEach(t=>t.classList.toggle("active", t.dataset.view===name));
    views.forEach(v=>$("view-"+v).classList.toggle("hidden", v!==name));
    window.scrollTo({top:0,behavior:"smooth"});
  }
  tabs.forEach(t=>t.onclick=()=>showView(t.dataset.view));
  document.querySelectorAll("[data-nav]").forEach(b=>b.onclick=()=>showView(b.dataset.nav));

  // ===== KPIs =====
  function renderKPIs(){
    $("kpiBalance").textContent = state.balance.toFixed(2);
    $("kpiLevel").textContent = state.level;
    const done = isTaskDoneToday() ? 1 : 0;
    $("kpiToday").textContent = `${done}/1`;
    $("taskRewardLabel").textContent = `+${state.taskReward.toFixed(2)}`;
  }

  // ===== Auth (Demo) =====
  function setAuthMsg(msg, ok=true){
    const el=$("authMsg");
    el.textContent = msg;
    el.style.color = ok ? "#0a7a2f" : "#7c1f1f";
  }
  $("btnSignup").onclick=()=>{
    const e=$("suEmail").value.trim();
    const p=$("suPass").value.trim();
    if(!e || !p) return setAuthMsg("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±.", false);
    state.user = { email:e };
    log("AUTH", "Signup: "+e);
    setAuthMsg("ØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ (Demo).");
  };
  $("btnLogin").onclick=()=>{
    const e=$("liEmail").value.trim();
    const p=$("liPass").value.trim();
    if(!e || !p) return setAuthMsg("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±.", false);
    state.user = { email:e };
    log("AUTH", "Login: "+e);
    setAuthMsg("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ (Demo).");
  };
  $("btnLogout").onclick=()=>{
    if(state.user) log("AUTH", "Logout: "+state.user.email);
    state.user=null;
    setAuthMsg("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬.", true);
  };

  // ===== Deposit (Manual / ) =====
  $("copyAddr").onclick=async()=>{
    const addr=$("depositAddr").textContent;
    try{ await navigator.clipboard.writeText(addr); $("copyAddr").textContent="âœ“"; setTimeout(()=>$("copyAddr").textContent=(dict[curLang].copy),1200);}
    catch{ alert(addr); }
  };
  function setTxMsg(msg, ok=true){
    const el=$("txMsg");
    el.textContent=msg;
    el.style.color = ok ? "#0a7a2f" : "#7c1f1f";
  }
  $("btnSubmitTx").onclick=()=>{
    if(!state.user) return setTxMsg("Ø³Ø¬Ù‘Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹.", false);
    const amt = parseFloat($("txAmount").value||"0");
    const tx  = $("txid").value.trim();
    if(!(amt>0) || !tx) return setTxMsg("Ø£Ø¯Ø®Ù„ Ù…Ø¨Ù„Øº Ùˆ TXID.", false);
    log("DEPOSIT_TXID", `User ${state.user.email} sent ${amt} USDT | TXID: ${tx}`);
    setTxMsg("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ (Demo). Ø³ÙŠØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ ÙŠØ¯ÙˆÙŠÙ‹Ø§.");
    $("txAmount").value=""; $("txid").value="";
  };

  // ===== Task =====
  function todayKey(){
    const d=new Date();
    return `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}-${String(d.getDate()).padStart(2,"0")}`;
  }
  function isTaskDoneToday(){
    return state.lastTaskDay === todayKey();
  }
  function setTaskMsg(msg, ok=true){
    const el=$("taskMsg");
    el.textContent=msg;
    el.style.color = ok ? "#0a7a2f" : "#7c1f1f";
  }
  $("btnStartTask").onclick=()=>{
    if(!state.user) return setTaskMsg("Ø³Ø¬Ù‘Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹.", false);
    if(isTaskDoneToday()) return setTaskMsg("Ù„Ù‚Ø¯ Ø£ÙƒÙ…Ù„Øª Ù…Ù‡Ù…Ø© Ø§Ù„ÙŠÙˆÙ… Ø¨Ø§Ù„ÙØ¹Ù„.", false);

    $("btnStartTask").disabled=true;
    let sec=30;
    setTaskMsg("Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¹Ø¯Ù‘ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ: 30 Ø«Ø§Ù†ÙŠØ©â€¦");
    const timer=setInterval(()=>{
      sec--;
      if(sec>0){
        setTaskMsg(`Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙ†ÙÙŠØ°â€¦ Ø¨Ù‚ÙŠ ${sec} Ø«Ø§Ù†ÙŠØ©`);
      } else {
        clearInterval(timer);
        state.lastTaskDay = todayKey();
        state.balance += state.taskReward;
        log("TASK_REWARD", `+${state.taskReward.toFixed(2)} (Daily task)`);
        setTaskMsg("ØªÙ… Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ù‡Ù…Ø© ÙˆØ¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ÙƒØ§ÙØ£Ø© (Demo).");
        $("btnStartTask").disabled=false;
      }
      renderKPIs();
    },1000);
  };
  $("btnResetDay").onclick=()=>{ state.lastTaskDay=null; setTaskMsg("Reset done (Demo)."); log("SYSTEM","Reset daily task (Demo)"); };

  // ===== Log =====
  function renderLog(){
    const body=$("logBody");
    body.innerHTML="";
    (state.logs||[]).slice(0,50).forEach(r=>{
      const tr=document.createElement("tr");
      tr.innerHTML = `<td><span class="badge">${escapeHtml(r.type)}</span></td><td>${escapeHtml(r.details)}</td><td>${escapeHtml(r.time)}</td>`;
      body.appendChild(tr);
    });
  }
  $("btnClearLog").onclick=()=>{
    state.logs=[];
    log("SYSTEM","Log cleared");
    save();
  };

  function escapeHtml(s){
    return String(s).replace(/[&<>"']/g, m=>({ "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;" }[m]));
  }

  // ===== i18n (AR/FR) =====
  const dict = {
    ar:{
      tabHome:"Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©", tabAuth:"ØªØ³Ø¬ÙŠÙ„ / Ø¯Ø®ÙˆÙ„", tabWallet:"Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹", tabTasks:"Ø§Ù„Ù…Ù‡Ø§Ù…", tabLog:"Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª",
      slide1:"Ù…Ù‡Ù…Ù‘Ø© ÙŠÙˆÙ…ÙŠØ© Ø¨Ø³ÙŠØ·Ø© â€¢ Ù†Ù‚Ø§Ø· Ø´ÙØ§ÙØ©", slide2:"ÙˆØ§Ø¬Ù‡Ø© Ù†Ø¸ÙŠÙØ© â€¢ Ø³Ø¬Ù„ Ø¹Ù…Ù„ÙŠØ§Øª ÙˆØ§Ø¶Ø­", slide3:"Ø¥ÙŠØ¯Ø§Ø¹ ÙŠØ¯ÙˆÙŠ â€¢ Ø¥Ø¯Ø§Ø±Ø© Ù…Ù† Ù„ÙˆØ­Ø© Admin",
      welcomeTitle:"Ù…Ø±Ø­Ø¨Ø§ Ø¨Ùƒ ÙÙŠ PointRise",
      welcomeText:"Ù‡Ø°Ù‡ ÙˆØ§Ø¬Ù‡Ø© Ø¬Ø§Ù‡Ø²Ø© (Demo) ØªØ¹Ø±Ø¶: ØªØ³Ø¬ÙŠÙ„/Ø¯Ø®ÙˆÙ„ØŒ Ø¥ÙŠØ¯Ø§Ø¹ ÙŠØ¯ÙˆÙŠØŒ Ù…Ù‡Ù…Ø© ÙŠÙˆÙ…ÙŠØ© ÙˆØ§Ø­Ø¯Ø©ØŒ ÙˆØ³Ø¬Ù„ Ø¹Ù…Ù„ÙŠØ§Øª. ÙŠÙ…ÙƒÙ† ØªØ·ÙˆÙŠØ±Ù‡Ø§ Ù„Ø§Ø­Ù‚Ù‹Ø§ ÙˆØ±Ø¨Ø·Ù‡Ø§ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø·Ø±ÙŠÙ‚Ø© Ø´Ø±Ø¹ÙŠØ©.",
      warnText:"ØªÙ†Ø¨ÙŠÙ‡: Ù„Ø§ ØªÙØ¹ÙØ¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø¨Ø£Ø±Ø¨Ø§Ø­ â€œÙ…Ø¶Ù…ÙˆÙ†Ø©â€. Ø§Ø¬Ø¹Ù„ Ø§Ù„Ù†Ø¸Ø§Ù… Ù†Ù‚Ø§Ø·/Ù…ÙƒØ§ÙØ¢Øª ÙˆØ§Ø¶Ø­ ÙˆØ´ÙØ§Ù Ø­Ø³Ø¨ Ø®Ø¯Ù…Ø© Ø­Ù‚ÙŠÙ‚ÙŠØ©.",
      kpiBalance:"Ø§Ù„Ø±ØµÙŠØ¯", kpiLevel:"Ø§Ù„Ù…Ø³ØªÙˆÙ‰", kpiToday:"Ù…Ù‡Ù…Ø© Ø§Ù„ÙŠÙˆÙ…",
      goAuth:"ØªØ³Ø¬ÙŠÙ„ / Ø¯Ø®ÙˆÙ„", goDeposit:"Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹", goTask:"Ø§Ù„Ù…Ù‡Ù…Ø© Ø§Ù„ÙŠÙˆÙ…ÙŠØ©",
      levelsTitle:"Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª (Ù…Ø«Ø§Ù„)", levelsText:"Ù…Ù‡Ù…Ø© ÙˆØ§Ø­Ø¯Ø© ÙƒÙ„ 24 Ø³Ø§Ø¹Ø©. Ù…Ø¯Ø© Ø§Ù„Ù…Ù‡Ù…Ø© = 30 Ø«Ø§Ù†ÙŠØ©. Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø£Ø¯Ù†Ø§Ù‡ Ø£Ù…Ø«Ù„Ø© Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØ¹Ø¯ÙŠÙ„.",
      colLevel:"Ø§Ù„Ù…Ø³ØªÙˆÙ‰", colMin:"Ø­Ø¯ Ø£Ø¯Ù†Ù‰", colReward:"Ù…ÙƒØ§ÙØ£Ø© Ø§Ù„Ù…Ù‡Ù…Ø©", colTime:"Ù…Ø¯Ø©",
      levelsNote:"* Ù‡Ø°Ø§ â€œØ¹Ø±Ø¶ ÙˆØ§Ø¬Ù‡Ø©â€ ÙÙ‚Ø·. Ø±Ø¨Ø· Ø¯ÙØ¹/Ø³Ø­Ø¨ Ø­Ù‚ÙŠÙ‚ÙŠ ÙŠØ­ØªØ§Ø¬ Ù†Ø¸Ø§Ù… Ù‚Ø§Ù†ÙˆÙ†ÙŠ ÙˆÙ…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù…ØªØ«Ø§Ù„.",
      authTitle:"ØªØ³Ø¬ÙŠÙ„ / Ø¯Ø®ÙˆÙ„ (Demo)", authText:"Ù‡Ø°Ø§ Ù†Ù…ÙˆØ°Ø¬ ÙˆØ§Ø¬Ù‡Ø© ÙÙ‚Ø·. Ø³ÙŠØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø­Ù„ÙŠÙ‹Ø§ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…ØªØµÙØ­ (LocalStorage) Ù„Ù„ØªØ¬Ø±Ø¨Ø©.",
      signup:"ØªØ³Ø¬ÙŠÙ„", login:"Ø¯Ø®ÙˆÙ„", email:"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ", password:"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±",
      btnSignup:"ØªØ³Ø¬ÙŠÙ„", btnLogin:"Ø¯Ø®ÙˆÙ„", btnLogout:"Ø®Ø±ÙˆØ¬",
      depositTitle:"Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹ Ø§Ù„ÙŠØ¯ÙˆÙŠ (BEP20)", depositText:"Ø§Ù†Ø³Ø® Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø£Ø¯Ù†Ø§Ù‡ Ø«Ù… Ø£Ø±Ø³Ù„ TXID (Ø±Ù‚Ù… Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©) Ù„Ù„Ø¥Ø¯Ø§Ø±Ø© Ù„ÙŠØªÙ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹ ÙŠØ¯ÙˆÙŠÙ‹Ø§.",
      depositAddrTitle:"Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹", copy:"Ù†Ø³Ø®", minDeposit:"Ø£Ù‚Ù„ Ø¥ÙŠØ¯Ø§Ø¹:", minWithdraw:"Ø£Ù‚Ù„ Ø³Ø­Ø¨:",
      submitTxTitle:"Ø¥Ø±Ø³Ø§Ù„ TXID", amount:"Ø§Ù„Ù…Ø¨Ù„Øº", txid:"TXID (Ø±Ù‚Ù… Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©)", submit:"Ø¥Ø±Ø³Ø§Ù„",
      taskTitle:"Ø§Ù„Ù…Ù‡Ù…Ø© Ø§Ù„ÙŠÙˆÙ…ÙŠØ© ", taskText:"Ù…Ù‡Ù…Ø© ÙˆØ§Ø­Ø¯Ø© ÙƒÙ„ 24 Ø³Ø§Ø¹Ø©. Ø§Ø¶ØºØ· â€œØ§Ø¨Ø¯Ø£â€ Ø«Ù… Ø§Ù†ØªØ¸Ø± 30 Ø«Ø§Ù†ÙŠØ© Ù„Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ù‡Ù…Ø©.",
      taskName:"Ù…Ø´Ø§Ù‡Ø¯Ø© Ù…Ø­ØªÙˆÙ‰ Ù„Ù…Ø¯Ø© 30 Ø«Ø§Ù†ÙŠØ©", taskRule:"ÙŠÙ…ÙƒÙ† Ø¥ØªÙ…Ø§Ù…Ù‡Ø§ Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙŠÙˆÙ…ÙŠÙ‹Ø§",
      start:"Ø§Ø¨Ø¯Ø£",
      logTitle:"Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª", logText:"Ù‡Ù†Ø§ ØªØ¸Ù‡Ø± Ø¹Ù…Ù„ÙŠØ§Øª: ØªØ³Ø¬ÙŠÙ„ØŒ Ø¥Ø±Ø³Ø§Ù„ TXIDØŒ Ù…ÙƒØ§ÙØ£Ø© Ù…Ù‡Ù…Ø©â€¦ (Ù…Ø­Ù„ÙŠÙ‹Ø§ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…ØªØµÙØ­).",
      lType:"Ø§Ù„Ù†ÙˆØ¹", lDetails:"ØªÙØ§ØµÙŠÙ„", lTime:"Ø§Ù„ÙˆÙ‚Øª", clearLog:"Ù…Ø³Ø­ Ø§Ù„Ø³Ø¬Ù„"
    },
    fr:{
      tabHome:"Accueil", tabAuth:"Connexion / Inscription", tabWallet:"DÃ©pÃ´t", tabTasks:"TÃ¢che", tabLog:"Historique",
      slide1:"Une tÃ¢che quotidienne â€¢ SystÃ¨me clair", slide2:"Interface propre â€¢ Historique lisible", slide3:"DÃ©pÃ´t manuel â€¢ Gestion Admin",
      welcomeTitle:"Bienvenue sur PointRise",
      welcomeText:"Ceci est une interface (DÃ©mo) : inscription/connexion, dÃ©pÃ´t manuel, une tÃ¢che quotidienne et historique. Vous pouvez la relier plus tard Ã  une base de donnÃ©es lÃ©galement.",
      warnText:"Attention : ne promettez pas des gains â€œgarantisâ€. Utilisez un systÃ¨me de points/rÃ©compenses transparent basÃ© sur un service rÃ©el.",
      kpiBalance:"Solde", kpiLevel:"Niveau", kpiToday:"TÃ¢che du jour",
      goAuth:"Connexion / Inscription", goDeposit:"DÃ©pÃ´t", goTask:"TÃ¢che quotidienne",
      levelsTitle:"Niveaux (exemple)", levelsText:"Une tÃ¢che toutes les 24h. DurÃ©e = 30s. Les chiffres sont modifiables.",
      colLevel:"Niveau", colMin:"Minimum", colReward:"RÃ©compense", colTime:"DurÃ©e",
      levelsNote:"* DÃ©mo UI ÙÙ‚Ø·. Un vrai systÃ¨me paiement/retrait nÃ©cessite conformitÃ© lÃ©gale.",
      authTitle:"Connexion / Inscription ", authText:"UI ÙÙ‚Ø·. Lâ€™utilisateur est stockÃ© localement (LocalStorage) pour test.",
      signup:"Inscription", login:"Connexion", email:"E-mail", password:"Mot de passe",
      btnSignup:"S'inscrire", btnLogin:"Se connecter", btnLogout:"DÃ©connexion",
      depositTitle:"DÃ©pÃ´t manuel (BEP20)", depositText:"Copiez lâ€™adresse Ø«Ù… envoyez TXID Ã  lâ€™admin pour validation manuelle.",
      depositAddrTitle:"Adresse de dÃ©pÃ´t", copy:"Copier", minDeposit:"DÃ©pÃ´t min :", minWithdraw:"Retrait min :",
      submitTxTitle:"Envoyer TXID ", amount:"Montant", txid:"TXID", submit:"Envoyer",
      taskTitle:"TÃ¢che Ø§Ù„ÙŠÙˆÙ…ÙŠØ© (DÃ©mo)", taskText:"Une tÃ¢che/24h. Cliquez â€œDÃ©marrerâ€ puis attendez 30 secondes.",
      taskName:"Regarder un contenu 30 secondes", taskRule:"Une fois par jour",
      start:"DÃ©marrer",
      logTitle:"Historique (DÃ©mo)", logText:"Connexion, TXID, rÃ©compenseâ€¦ (stockÃ© localement).",
      lType:"Type", lDetails:"DÃ©tails", lTime:"Heure", clearLog:"Effacer l'historique"
    }
  };

  let curLang = "ar";
  function applyLang(lang){
    curLang = lang;
    const isAr = lang==="ar";
    document.documentElement.lang = isAr ? "ar" : "fr";
    document.documentElement.dir  = isAr ? "rtl" : "ltr";
    // Update texts
    document.querySelectorAll("[data-i18n]").forEach(el=>{
      const k = el.getAttribute("data-i18n");
      if(dict[lang][k]) el.textContent = dict[lang][k];
    });
    // Re-apply slider direction fix
    setSlide(si);
    $("copyAddr").textContent = dict[curLang].copy;
  }
  $("langSelect").onchange=(e)=>applyLang(e.target.value);

  // ===== Render all =====
  function renderAll(){
    $("year").textContent = new Date().getFullYear();
    renderKPIs();
    renderLog();
  }
  renderAll();
  applyLang("ar");
  showView("home");
</script>
</body>
</html>
